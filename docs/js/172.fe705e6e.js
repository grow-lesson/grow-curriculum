"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[172],{1172:function(e,o,a){a.r(o),a.d(o,{default:function(){return T}});var r=a(6252),s=a(9963),l=a(3577);const n={class:"loginPage"},i={class:"login-header"},t={class:"login-container"},c=(0,r._)("div",{class:"login-title"},[(0,r._)("div",null,"Login")],-1),u=(0,r._)("br",null,null,-1),m={class:"login"},d={class:"login-errorMessage"},p={class:"login-errorMessage"},g=(0,r._)("button",null,"ログイン",-1),w={class:"btn-back"};function _(e,o,a,_,h,f){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",i,[(0,r._)("a",{onClick:o[0]||(o[0]=(...e)=>_.goToWelcomePage&&_.goToWelcomePage(...e)),class:"logo"},"GROW Learning Website")]),(0,r._)("div",t,[c,u,(0,r._)("div",m,[(0,r._)("form",{onSubmit:o[3]||(o[3]=(...e)=>_.onSubmit&&_.onSubmit(...e))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>_.email=e),placeholder:"メールアドレス",name:"email"},null,512),[[s.nr,_.email]]),(0,r._)("p",d,(0,l.zw)(_.errors["form.email"]),1),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=e=>_.password=e),placeholder:"パスワード",name:"password"},null,512),[[s.nr,_.password]]),(0,r._)("p",p,(0,l.zw)(_.errors["form.password"]),1),g],32),(0,r._)("p",w,[(0,r._)("a",{onClick:o[4]||(o[4]=(...e)=>_.goToWelcomePage&&_.goToWelcomePage(...e))},"＞戻る")])])])])}a(7658);var h=a(2954),f=a(2387),b=a(6310),v=a(6565),k=a(2201),P={setup(){(0,b.i_)({mixed:{defalut:"不正な値です。",required:({label:e})=>`${e}は必須の項目です。`},string:{email:({label:e})=>`${e}の形式ではありません。`}}),Object.keys(f.ZP).forEach((e=>{(0,h.aH)(e,f.ZP[e])}));const e=(0,b.Ry)({form:(0,b.Ry)({email:(0,b.Z_)().required().email().label("メールアドレス"),password:(0,b.Z_)().required().label("パスワード")})}),{errors:o,handleSubmit:a}=(0,h.cI)({validationSchema:e,initialValues:{form:{email:"",password:""}}}),{value:r}=(0,h.U$)("form.email"),{value:s}=(0,h.U$)("form.password"),l=(0,k.tv)(),n=()=>{l.push({name:"Welcome"})},i=a((async e=>{const o={email:e.form.email,password:e.form.password};function a(e,o){const a=7,r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);const s="expires="+r.toUTCString(),l=encodeURIComponent(o);document.cookie=`${e}=${l};${s};path=/;secure;SameSite=strict`}v.Z.post("/auth/sign_in",o,{withCredentials:!0}).then((e=>{if(201!==e.data.status)throw new Error("ログインエラーが発生しました");a("access-token",e.headers["access-token"]),a("client",e.headers["client"]),a("uid",e.headers["uid"]),l.push({name:"MenuPage"})})).catch((e=>{console.error(e),alert("ログインエラーが発生しました")}))}));return{email:r,password:s,errors:o,onSubmit:i,goToWelcomePage:n}}},S=a(3744);const y=(0,S.Z)(P,[["render",_]]);var T=y}}]);
//# sourceMappingURL=172.fe705e6e.js.map