{"version":3,"file":"js/4572.7506035d.js","mappings":"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","sources":["webpack://grow-curriculum/./src/components/LoginPage.vue","webpack://grow-curriculum/./node_modules/js-cookie/dist/js.cookie.mjs","webpack://grow-curriculum/./src/components/LoginPage.vue?8d24"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-header\">\n      <p class=\"login-title\">GROW Learning Website</p>\n    </div>\n    <div class=\"login-container\">\n      <div class=\"login-text\">\n        <div>Login</div>\n      </div>\n      <br>\n      <div class=\"login\">\n        <form @submit.prevent=\"onSubmit\">\n          <input type=\"text\" v-model=\"form.email\" @input=\"validateField('email')\" placeholder=\"メールアドレス\" name=\"email\" />\n          <p class=\"login-errorMessage\">{{ errors.email }}</p>\n          <input type=\"password\" v-model=\"form.password\" @input=\"validateField('password')\" placeholder=\"パスワード\" name=\"password\" />\n          <p class=\"login-errorMessage\">{{ errors.password }}</p>\n          <button>ログイン</button>\n        </form>\n        <p class=\"btn-back\"><a @click=\"goToWelcomePage\">＞戻る</a></p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport * as yup from 'yup';\nimport api from '@/axios';\nimport { useRouter } from 'vue-router';\nimport Cookies from 'js-cookie'; // js-cookieをインポート\n\nexport default {\n  setup() {\n    const router = useRouter();\n    \n    const form = ref({\n      email: '',\n      password: '',\n    });\n\n    const errors = ref({\n      email: '',\n      password: '',\n    });\n\n    const schema = yup.object({\n      email: yup.string().required('メールアドレスは必須の項目です。').email('メールアドレスの形式ではありません。'),\n      password: yup.string().required('パスワードは必須の項目です。'),\n    });\n\n    const validateField = async (field) => {\n      try {\n        await yup.reach(schema, field).validate(form.value[field]);\n        errors.value[field] = '';\n      } catch (e) {\n        errors.value[field] = e.message;\n      }\n    };\n\n    const goToWelcomePage = () => {\n      router.push({ name: \"Welcome\" });\n    };\n\n    const onSubmit = async () => {\n      try {\n        await schema.validate(form.value, { abortEarly: false });\n        const loginData = {\n          email: form.value.email,\n          password: form.value.password,\n        };\n\n        const response = await api.post('/auth/sign_in', loginData, { withCredentials: true });\n        console.log(response);\n\n        if (response.status === 201 || response.status === 200) {\n          setCookie('access-token', response.headers['access-token']);\n          setCookie('client', response.headers['client']);\n          setCookie('uid', response.headers['uid']);\n\n          router.push({ name: 'MenuPage' });\n        } else {\n          throw new Error('ログインエラーが発生しました');\n        }\n      } catch (error) {\n        console.error('APIエラー:', error);\n        if (error.response) {\n          console.error('Response data:', error.response.data);\n          console.error('Response status:', error.response.status);\n          console.error('Response headers:', error.response.headers);\n          alert(error.response.data.message || 'ログインエラーが発生しました');\n        } else if (error.request) {\n          console.error('Request data:', error.request);\n          alert('サーバーから応答がありません。ネットワークを確認してください。');\n        } else {\n          console.error('Error message:', error.message);\n          alert(error.message);\n        }\n      }\n    };\n\n    function setCookie(name, value) {\n      const days = 7;\n      const date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      const cookieValue = encodeURIComponent(value);\n      Cookies.set(name, value, { expires: 7, secure: true, sameSite: 'Strict', path: '/' });\n    }\n\n    return {\n      form,\n      errors,\n      onSubmit,\n      goToWelcomePage,\n      validateField,\n    };\n  },\n};\n</script>\n\n\n\n<style>\n.login-page {\n  width: 100%;\n  background-color: #228bc8;\n  font-size: 12px;\n  height: 100vh;\n  padding-bottom: 40px;\n}\n\n.login-header {\n  width: 100%;\n  background-color: rgba(255, 255, 255);\n  display: flex;\n  align-items: center;\n  padding: 30px 30px 10px 30px;\n  margin-bottom: 50px;\n}\n\n.login-title {\n  font-size: 24px;\n  font-weight: bold;\n  color: #333;\n  padding-left: 20px;\n}\n\n.login-container {\n  margin: 0 auto;\n  width: 400px;\n  padding: 40px;\n  background-color: #fff;\n  box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.2), 0 10px 5px 0 rgba(0, 0, 0, 0.24);\n  border-radius: 10px;\n  font-size: 16px;\n}\n\n.login-text {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  color: #228bc8;\n}\n\n.login {\n  text-align: center;\n}\n\n.login input[type=text],\n.login input[type=password] {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 20px;\n  background-color: rgb(0 0 0 / 30%);\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n}\n\n.login-errorMessage {\n  color: red;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.login button {\n  width: 100%;\n  padding: 10px;\n  margin-top: 30px;\n  background-color: #228bc8;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.login button:hover {\n  opacity: 0.8;\n}\n\n.login button:active {\n  opacity: 0.6;\n}\n\n.login input[type=text]:focus,\n.login input[type=password]:focus,\n.login button:focus {\n  outline: none;\n}\n\n::-webkit-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n::-moz-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.btn-back {\n  margin-top: 20px;\n  text-align: right;\n  font-weight: bold;\n  color: #228bc8;\n  cursor: pointer;\n}\n\n@media (max-width: 648px) {\n  .login-container {\n    width: 300px;\n    padding: 20px 20px 100px 20px;\n  }\n}\n</style>\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","import { render } from \"./LoginPage.vue?vue&type=template&id=c5e59da0\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=c5e59da0&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","$setup","type","form","email","$event","onInput","validateField","placeholder","name","_hoisted_7","_toDisplayString","errors","password","_hoisted_8","_hoisted_9","_hoisted_10","onClick","goToWelcomePage","target","i","arguments","length","source","key","defaultConverter","read","value","slice","replace","decodeURIComponent","write","encodeURIComponent","init","converter","defaultAttributes","set","attributes","document","expires","Date","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","found","e","Object","create","remove","withAttributes","this","withConverter","freeze","api","path","setup","router","useRouter","ref","schema","yup","required","async","field","validate","message","push","abortEarly","loginData","response","post","withCredentials","console","log","status","Error","setCookie","headers","error","data","alert","request","days","date","setTime","getTime","Cookies","secure","sameSite","__exports__","render"],"sourceRoot":""}