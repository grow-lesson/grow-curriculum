"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[5360],{25360:function(e,s,a){a.r(s),a.d(s,{default:function(){return S}});var r=a(66252),o=a(49963),t=a(3577);const n={class:"login-page"},l=(0,r._)("div",{class:"login-header"},[(0,r._)("p",{class:"login-title"},"GROW Learning Website")],-1),i={class:"login-container"},u=(0,r._)("div",{class:"login-text"},[(0,r._)("div",null,"Login")],-1),c=(0,r._)("br",null,null,-1),d={class:"login"},p={class:"login-errorMessage"},m={class:"login-errorMessage"},g=(0,r._)("button",null,"ログイン",-1),w={class:"btn-back"};function v(e,s,a,v,_,h){return(0,r.wg)(),(0,r.iD)("div",n,[l,(0,r._)("div",i,[u,c,(0,r._)("div",d,[(0,r._)("form",{onSubmit:s[4]||(s[4]=(0,o.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>v.form.email=e),onInput:s[1]||(s[1]=e=>v.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[o.nr,v.form.email]]),(0,r._)("p",p,(0,t.zw)(v.errors.email),1),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>v.form.password=e),onInput:s[3]||(s[3]=e=>v.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[o.nr,v.form.password]]),(0,r._)("p",m,(0,t.zw)(v.errors.password),1),g],32),(0,r._)("p",w,[(0,r._)("a",{onClick:s[5]||(s[5]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e))},"＞戻る")])])])])}a(57658);var _=a(2262),h=a(16310),f=a(56565),b=a(22201),y={setup(){const e=(0,b.tv)(),s=(0,_.iH)({email:"",password:""}),a=(0,_.iH)({email:"",password:""}),r=h.Ry({email:h.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:h.Z_().required("パスワードは必須の項目です。")}),o=async e=>{try{await h.ct(r,e).validate(s.value[e]),a.value[e]=""}catch(o){a.value[e]=o.message}},t=()=>{e.push({name:"Welcome"})},n=async()=>{try{await r.validate(s.value,{abortEarly:!1});const a={email:s.value.email,password:s.value.password},o=await f.Z.post("/auth/sign_in",a,{withCredentials:!0});if(201!==o.status&&200!==o.status)throw new Error("ログインエラーが発生しました");l("access-token",o.headers["access-token"]),l("client",o.headers["client"]),l("uid",o.headers["uid"]),e.push({name:"MenuPage"})}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status),console.error("Response headers:",a.response.headers),alert(a.response.data.message||"ログインエラーが発生しました")):a.request?(console.error("Request data:",a.request),alert("サーバーから応答がありません。ネットワークを確認してください。")):(console.error("Error message:",a.message),alert(a.message))}};function l(e,s){const a=7,r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);const o="expires="+r.toUTCString(),t=encodeURIComponent(s);document.cookie=`${e}=${t};${o};path=/;secure;SameSite=strict`}return{form:s,errors:a,onSubmit:n,goToWelcomePage:t,validateField:o}}},k=a(83744);const R=(0,k.Z)(y,[["render",v]]);var S=R}}]);
//# sourceMappingURL=5360.1355bfe9.js.map