"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[9823],{59823:function(e,a,r){r.r(a),r.d(a,{default:function(){return C}});var o=r(66252),s=r(49963),n=r(3577);const t={class:"login-page"},l=(0,o._)("div",{class:"login-header"},[(0,o._)("p",{class:"login-title"},"GROW Learning Website")],-1),i={class:"login-container"},c=(0,o._)("div",{class:"login-text"},[(0,o._)("div",null,"Login")],-1),u=(0,o._)("br",null,null,-1),d={class:"login"},m={class:"login-errorMessage"},p={class:"login-errorMessage"},g=(0,o._)("button",null,"ログイン",-1),w={class:"btn-back"};function v(e,a,r,v,h,_){return(0,o.wg)(),(0,o.iD)("div",t,[l,(0,o._)("div",i,[c,u,(0,o._)("div",d,[(0,o._)("form",{onSubmit:a[4]||(a[4]=(0,s.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>v.form.email=e),onInput:a[1]||(a[1]=e=>v.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[s.nr,v.form.email]]),(0,o._)("p",m,(0,n.zw)(v.errors.email),1),(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>v.form.password=e),onInput:a[3]||(a[3]=e=>v.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[s.nr,v.form.password]]),(0,o._)("p",p,(0,n.zw)(v.errors.password),1),g],32),(0,o._)("p",w,[(0,o._)("a",{onClick:a[5]||(a[5]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e))},"＞戻る")])])])])}r(57658);var h=r(2262),_=r(16310),f=r(56565),b=r(22201),y={setup(){const e=(0,b.tv)(),a=(0,h.iH)({email:"",password:""}),r=(0,h.iH)({email:"",password:""}),o=_.Ry({email:_.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:_.Z_().required("パスワードは必須の項目です。")}),s=async e=>{try{await _.ct(o,e).validate(a.value[e]),r.value[e]=""}catch(s){r.value[e]=s.message}},n=()=>{e.push({name:"Welcome"})},t=async()=>{try{await o.validate(a.value,{abortEarly:!1});const r={email:a.value.email,password:a.value.password};f.Z.post("/auth/sign_in",r,{withCredentials:!0}).then((a=>{if(201!==a.data.status)throw new Error("ログインエラーが発生しました");l("access-token",a.headers["access-token"]),l("client",a.headers["client"]),l("uid",a.headers["uid"]),e.push({name:"MenuPage"})})).catch((e=>{console.error(e),alert("ログインエラーが発生しました")}))}catch(s){s.inner.forEach((e=>{r.value[e.path]=e.message}))}};function l(e,a){const r=7,o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);const s="expires="+o.toUTCString(),n=encodeURIComponent(a);document.cookie=`${e}=${n};${s};path=/;secure;SameSite=strict`}return{form:a,errors:r,onSubmit:t,goToWelcomePage:n,validateField:s}}},k=r(83744);const S=(0,k.Z)(y,[["render",v]]);var C=S}}]);
//# sourceMappingURL=9823.4dc5ff34.js.map