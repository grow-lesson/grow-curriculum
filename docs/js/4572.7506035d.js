"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[4572],{44572:function(e,r,t){t.r(r),t.d(r,{default:function(){return S}});var o=t(66252),n=t(49963),a=t(3577);const s={class:"login-page"},i=(0,o._)("div",{class:"login-header"},[(0,o._)("p",{class:"login-title"},"GROW Learning Website")],-1),l={class:"login-container"},c=(0,o._)("div",{class:"login-text"},[(0,o._)("div",null,"Login")],-1),u=(0,o._)("br",null,null,-1),d={class:"login"},p={class:"login-errorMessage"},m={class:"login-errorMessage"},g=(0,o._)("button",null,"ログイン",-1),v={class:"btn-back"};function f(e,r,t,f,w,h){return(0,o.wg)(),(0,o.iD)("div",s,[i,(0,o._)("div",l,[c,u,(0,o._)("div",d,[(0,o._)("form",{onSubmit:r[4]||(r[4]=(0,n.iM)(((...e)=>f.onSubmit&&f.onSubmit(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>f.form.email=e),onInput:r[1]||(r[1]=e=>f.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[n.nr,f.form.email]]),(0,o._)("p",p,(0,a.zw)(f.errors.email),1),(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":r[2]||(r[2]=e=>f.form.password=e),onInput:r[3]||(r[3]=e=>f.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[n.nr,f.form.password]]),(0,o._)("p",m,(0,a.zw)(f.errors.password),1),g],32),(0,o._)("p",v,[(0,o._)("a",{onClick:r[5]||(r[5]=(...e)=>f.goToWelcomePage&&f.goToWelcomePage(...e))},"＞戻る")])])])])}t(57658);var w=t(2262),h=t(16310),b=t(56565),_=t(22201);
/*! js-cookie v3.0.5 | MIT */
function C(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)e[o]=t[o]}return e}var y={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function R(e,r){function t(t,o,n){if("undefined"!==typeof document){n=C({},r,n),"number"===typeof n.expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in n)n[s]&&(a+="; "+s,!0!==n[s]&&(a+="="+n[s].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+a}}function o(r){if("undefined"!==typeof document&&(!arguments.length||r)){for(var t=document.cookie?document.cookie.split("; "):[],o={},n=0;n<t.length;n++){var a=t[n].split("="),s=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(o[i]=e.read(s,i),r===i)break}catch(l){}}return r?o[r]:o}}return Object.create({set:t,get:o,remove:function(e,r){t(e,"",C({},r,{expires:-1}))},withAttributes:function(e){return R(this.converter,C({},this.attributes,e))},withConverter:function(e){return R(C({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}})}var k=R(y,{path:"/"}),x={setup(){const e=(0,_.tv)(),r=(0,w.iH)({email:"",password:""}),t=(0,w.iH)({email:"",password:""}),o=h.Ry({email:h.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:h.Z_().required("パスワードは必須の項目です。")}),n=async e=>{try{await h.ct(o,e).validate(r.value[e]),t.value[e]=""}catch(n){t.value[e]=n.message}},a=()=>{e.push({name:"Welcome"})},s=async()=>{try{await o.validate(r.value,{abortEarly:!1});const t={email:r.value.email,password:r.value.password},n=await b.Z.post("/auth/sign_in",t,{withCredentials:!0});if(console.log(n),201!==n.status&&200!==n.status)throw new Error("ログインエラーが発生しました");i("access-token",n.headers["access-token"]),i("client",n.headers["client"]),i("uid",n.headers["uid"]),e.push({name:"MenuPage"})}catch(t){console.error("APIエラー:",t),t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status),console.error("Response headers:",t.response.headers),alert(t.response.data.message||"ログインエラーが発生しました")):t.request?(console.error("Request data:",t.request),alert("サーバーから応答がありません。ネットワークを確認してください。")):(console.error("Error message:",t.message),alert(t.message))}};function i(e,r){const t=7,o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);encodeURIComponent(r);k.set(e,r,{expires:7,secure:!0,sameSite:"Strict",path:"/"})}return{form:r,errors:t,onSubmit:s,goToWelcomePage:a,validateField:n}}},I=t(83744);const U=(0,I.Z)(x,[["render",f]]);var S=U}}]);
//# sourceMappingURL=4572.7506035d.js.map