{"version":3,"file":"js/7943.183351b0.js","mappings":"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","sources":["webpack://grow-curriculum/./src/components/LoginPage.vue","webpack://grow-curriculum/./src/components/LoginPage.vue?8d24","webpack://grow-curriculum/./src/components/Spinner.vue","webpack://grow-curriculum/./src/components/Spinner.vue?1502"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-header\">\n      <p class=\"login-title\">GROW Learning Website</p>\n    </div>\n    <div class=\"login-container\">\n      <div class=\"login-text\">\n        <div>Login</div>\n      </div>\n      <br>\n      <div class=\"login\">\n        <form @submit.prevent=\"onSubmit\">\n          <input type=\"text\" v-model=\"form.email\" @input=\"validateField('email')\" placeholder=\"メールアドレス\" name=\"email\" />\n          <p class=\"login-errorMessage\">{{ errors.email }}</p>\n          <input type=\"password\" v-model=\"form.password\" @input=\"validateField('password')\" placeholder=\"パスワード\" name=\"password\" />\n          <p class=\"login-errorMessage\">{{ errors.password }}</p>\n          <button type=\"submit\" :disabled=\"isLoading\">{{ isLoading ? 'ログイン中...' : 'ログイン' }}</button> <!-- ローディング時にボタン表示を変更 -->\n        </form>\n        <p class=\"btn-back\"><a @click=\"goToWelcomePage\">＞戻る</a></p>\n      </div>\n    </div>\n    <Spinner :isLoading=\"isLoading\" /> <!-- スピナーを追加 -->\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport * as yup from 'yup';\nimport api from '@/axios';\nimport { useRouter } from 'vue-router';\nimport { isCapacitor } from '@/utils';\nimport { CapacitorCookies } from '@capacitor/core';\nimport Spinner from '@/components/Spinner.vue'; // スピナーコンポーネントをインポート\n\nexport default {\n  components: {\n    Spinner, // スピナーをコンポーネントに追加\n  },\n  setup() {\n    const router = useRouter();\n    \n    const form = ref({\n      email: '',\n      password: '',\n    });\n\n    const errors = ref({\n      email: '',\n      password: '',\n    });\n\n    const isLoading = ref(false); // ローディング状態を管理\n\n    const schema = yup.object({\n      email: yup.string().required('メールアドレスは必須の項目です。').email('メールアドレスの形式ではありません。'),\n      password: yup.string().required('パスワードは必須の項目です。'),\n    });\n\n    const validateField = async (field) => {\n      try {\n        await yup.reach(schema, field).validate(form.value[field]);\n        errors.value[field] = '';\n      } catch (e) {\n        errors.value[field] = e.message;\n      }\n    };\n\n    const goToWelcomePage = () => {\n      router.push({ name: \"Welcome\" });\n    };\n\n    const onSubmit = async () => {\n      isLoading.value = true; // ローディング開始\n      try {\n        await schema.validate(form.value, { abortEarly: false });\n        const loginData = {\n          email: form.value.email,\n          password: form.value.password,\n        };\n\n        const response = await api.post('/auth/sign_in', loginData, { withCredentials: true });\n\n        if (response.status === 201 || response.status === 200) {\n          await setCookie('access-token', response.headers['access-token']);\n          await setCookie('client', response.headers['client']);\n          await setCookie('uid', response.headers['uid']);\n\n          router.push({ name: 'MenuPage' });\n        } else {\n          throw new Error('ログインエラーが発生しました');\n        }\n      } catch (error) {\n        if (error.response) {\n          alert(error.response.data.message || 'ログインエラーが発生しました');\n        } else if (error.request) {\n          alert('サーバーから応答がありません。ネットワークを確認してください。');\n        } else {\n          alert(error.message);\n        }\n      } \n    };\n\n    const setCookie = async (name, value, days = 7) => {\n      const date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      const expires = date.toUTCString();\n\n      if (isCapacitor()) {\n        await CapacitorCookies.setCookie({\n          url: 'https://grow-curriculum-backend-f10ce9239245.herokuapp.com',\n          key: name,\n          value: value,\n          expires: expires,\n          path: '/', // ルートパスに設定\n          secure: true,\n          sameSite: 'None',\n        });\n      } else {\n        document.cookie = name + \"=\" + encodeURIComponent(value) + \"; expires=\" + expires + \"; path=/; SameSite=None; Secure\";\n      }\n    };\n\n    return {\n      form,\n      errors,\n      isLoading, // ローディング状態を返す\n      onSubmit,\n      goToWelcomePage,\n      validateField,\n    };\n  },\n};\n</script>\n\n<style>\n.login-page {\n  width: 100%;\n  background: linear-gradient(135deg, #1d1d1d, #4188b6);\n  font-size: 12px;\n  height: 100vh;\n  padding-bottom: 40px;\n}\n\n.login-header {\n  width: 100%;\n  background-color: rgba(255, 255, 255);\n  display: flex;\n  align-items: center;\n  padding: 30px 30px 10px 30px;\n  margin-bottom: 50px;\n}\n\n.login-title {\n  font-size: 24px;\n  font-weight: bold;\n  color: #333;\n  padding-left: 20px;\n}\n\n.login-container {\n  margin: 0 auto;\n  width: 400px;\n  padding: 40px;\n  background-color: #fff;\n  box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.2), 0 10px 5px 0 rgba(0, 0, 0, 0.24);\n  border-radius: 10px;\n  font-size: 16px;\n}\n\n.login-text {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  color: #228bc8;\n}\n\n.login {\n  text-align: center;\n}\n\n.login input[type=text],\n.login input[type=password] {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 20px;\n  background-color: rgb(0 0 0 / 30%);\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n}\n\n.login-errorMessage {\n  color: red;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.login button {\n  width: 100%;\n  padding: 10px;\n  margin-top: 30px;\n  background-color: #228bc8;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.login button:hover {\n  opacity: 0.8;\n}\n\n.login button:active {\n  opacity: 0.6;\n}\n\n.login input[type=text]:focus,\n.login input[type=password]:focus,\n.login button:focus {\n  outline: none;\n}\n\n::-webkit-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n::-moz-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.btn-back {\n  margin-top: 20px;\n  text-align: right;\n  font-weight: bold;\n  color: #228bc8;\n  cursor: pointer;\n}\n\n@media (max-width: 648px) {\n  .login-container {\n    width: 300px;\n    padding: 20px 20px 100px 20px;\n  }\n}\n</style>\n","import { render } from \"./LoginPage.vue?vue&type=template&id=23383e78\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=23383e78&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"spinner-container\" v-if=\"isLoading\">\n    <h1 class=\"spinner-text\">Loading...</h1>\n    <div class=\"spectrum-bars\">\n      <div class=\"bar\" v-for=\"n in 5\" :key=\"n\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n};\n</script>\n\n<style scoped>\n.spinner-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(255, 255, 255, 0.85);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  z-index: 9999;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n}\n\n.spinner-text {\n  font-size: 2vw;\n  color: #3498db;\n  margin-bottom: 20px;\n  animation: fadeIn 2s ease-in-out infinite;\n}\n\n@keyframes fadeIn {\n  0%, 100% {\n    opacity: 0.1;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n\n.spectrum-bars {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.bar {\n  width: 10px;\n  height: 30px;\n  background-color: #3498db;\n  margin: 0 5px;\n  animation: growShrink 1.5s ease-in-out infinite;\n  animation-delay: calc(0.2s * var(--i));\n}\n\n.bar:nth-child(1) { animation-delay: 0s; }\n.bar:nth-child(2) { animation-delay: 0.2s; }\n.bar:nth-child(3) { animation-delay: 0.4s; }\n.bar:nth-child(4) { animation-delay: 0.6s; }\n.bar:nth-child(5) { animation-delay: 0.8s; }\n\n@keyframes growShrink {\n  0%, 100% {\n    height: 30px;\n  }\n  50% {\n    height: 80px;\n  }\n}\n\n/* Media query to adjust font size and layout based on screen width */\n@media (max-width: 600px) {\n  .spinner-text {\n    font-size: 4vw;\n  }\n\n  .bar {\n    width: 6px;\n    margin: 0 3px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .spinner-text {\n    font-size: 1.5vw;\n  }\n\n  .bar {\n    width: 15px;\n    height: 40px;\n  }\n}\n</style>\n","import { render } from \"./Spinner.vue?vue&type=template&id=66e9c951&scoped=true\"\nimport script from \"./Spinner.vue?vue&type=script&lang=js\"\nexport * from \"./Spinner.vue?vue&type=script&lang=js\"\n\nimport \"./Spinner.vue?vue&type=style&index=0&id=66e9c951&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66e9c951\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","$setup","type","form","email","$event","onInput","validateField","placeholder","name","_hoisted_7","_toDisplayString","errors","password","_hoisted_8","disabled","isLoading","_hoisted_9","_hoisted_10","onClick","goToWelcomePage","_createVNode","_component_Spinner","components","Spinner","setup","router","useRouter","ref","schema","yup","required","async","field","validate","value","e","message","push","abortEarly","loginData","response","api","post","withCredentials","status","Error","setCookie","headers","error","alert","data","request","days","date","Date","setTime","getTime","expires","toUTCString","isCapacitor","CapacitorCookies","url","key","path","secure","sameSite","document","cookie","encodeURIComponent","__exports__","render","$props","_Fragment","_renderList","n","props","Boolean","default"],"sourceRoot":""}