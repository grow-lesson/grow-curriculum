"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[7456],{37456:function(e,a,s){s.r(a),s.d(a,{default:function(){return T}});var r=s(66252),t=s(49963),o=s(3577);const i={class:"login-page"},l=(0,r._)("div",{class:"login-header"},[(0,r._)("p",{class:"login-title"},"GROW Learning Website")],-1),n={class:"login-container"},u=(0,r._)("div",{class:"login-text"},[(0,r._)("div",null,"Login")],-1),c=(0,r._)("br",null,null,-1),d={class:"login"},m={class:"login-errorMessage"},p={class:"login-errorMessage"},w=(0,r._)("button",null,"ログイン",-1),g={class:"btn-back"};function v(e,a,s,v,h,_){return(0,r.wg)(),(0,r.iD)("div",i,[l,(0,r._)("div",n,[u,c,(0,r._)("div",d,[(0,r._)("form",{onSubmit:a[4]||(a[4]=(0,t.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>v.form.email=e),onInput:a[1]||(a[1]=e=>v.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[t.nr,v.form.email]]),(0,r._)("p",m,(0,o.zw)(v.errors.email),1),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>v.form.password=e),onInput:a[3]||(a[3]=e=>v.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[t.nr,v.form.password]]),(0,r._)("p",p,(0,o.zw)(v.errors.password),1),w],32),(0,r._)("p",g,[(0,r._)("a",{onClick:a[5]||(a[5]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e))},"＞戻る")])])])])}s(57658);var h=s(2262),_=s(16310),f=s(56565),b=s(22201),k=s(58661),y=s(29895),S={setup(){const e=(0,b.tv)(),a=(0,h.iH)({email:"",password:""}),s=(0,h.iH)({email:"",password:""}),r=_.Ry({email:_.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:_.Z_().required("パスワードは必須の項目です。")}),t=async e=>{try{await _.ct(r,e).validate(a.value[e]),s.value[e]=""}catch(t){s.value[e]=t.message}},o=()=>{e.push({name:"Welcome"})},i=async()=>{try{await r.validate(a.value,{abortEarly:!1});const s={email:a.value.email,password:a.value.password},t=await f.Z.post("/auth/sign_in",s,{withCredentials:!0});if(201!==t.status&&200!==t.status)throw new Error("ログインエラーが発生しました");await l("access-token",t.headers["access-token"]),await l("client",t.headers["client"]),await l("uid",t.headers["uid"]),e.push({name:"MenuPage"})}catch(s){s.response?alert(s.response.data.message||"ログインエラーが発生しました"):s.request?alert("サーバーから応答がありません。ネットワークを確認してください。"):alert(s.message)}},l=async(e,a,s=7)=>{const r=new Date;r.setTime(r.getTime()+24*s*60*60*1e3);const t=r.toUTCString();(0,k.W)()?await y.Zw.setCookie({url:"https://grow-curriculum-backend-f10ce9239245.herokuapp.com",key:e,value:a,expires:t,path:"/",secure:!0,sameSite:"None"}):document.cookie=e+"="+encodeURIComponent(a)+"; expires="+t+"; path=/; SameSite=None; Secure"};return{form:a,errors:s,onSubmit:i,goToWelcomePage:o,validateField:t}}},C=s(83744);const W=(0,C.Z)(S,[["render",v]]);var T=W}}]);
//# sourceMappingURL=7456.c5054921.js.map