"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[3986],{53986:function(e,a,o){o.r(a),o.d(a,{default:function(){return W}});var r=o(66252),s=o(49963),l=o(3577);const n={class:"login-page"},t={class:"login-header"},i={class:"login-container"},c=(0,r._)("div",{class:"login-title"},[(0,r._)("div",null,"Login")],-1),u=(0,r._)("br",null,null,-1),d={class:"login"},m={class:"login-errorMessage"},p={class:"login-errorMessage"},g=(0,r._)("button",null,"ログイン",-1),w={class:"btn-back"};function v(e,a,o,v,h,_){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",t,[(0,r._)("a",{onClick:a[0]||(a[0]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e)),class:"logo"},"GROW Learning Website")]),(0,r._)("div",i,[c,u,(0,r._)("div",d,[(0,r._)("form",{onSubmit:a[5]||(a[5]=(0,s.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>v.form.email=e),onInput:a[2]||(a[2]=e=>v.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[s.nr,v.form.email]]),(0,r._)("p",m,(0,l.zw)(v.errors.email),1),(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":a[3]||(a[3]=e=>v.form.password=e),onInput:a[4]||(a[4]=e=>v.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[s.nr,v.form.password]]),(0,r._)("p",p,(0,l.zw)(v.errors.password),1),g],32),(0,r._)("p",w,[(0,r._)("a",{onClick:a[6]||(a[6]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e))},"＞戻る")])])])])}o(57658);var h=o(2262),_=o(16310),f=o(56565),b=o(22201),k={setup(){const e=(0,b.tv)(),a=(0,h.iH)({email:"",password:""}),o=(0,h.iH)({email:"",password:""}),r=_.Ry({email:_.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:_.Z_().required("パスワードは必須の項目です。")}),s=async e=>{try{await _.ct(r,e).validate(a.value[e]),o.value[e]=""}catch(s){o.value[e]=s.message}},l=()=>{e.push({name:"Welcome"})},n=async()=>{try{await r.validate(a.value,{abortEarly:!1});const o={email:a.value.email,password:a.value.password};f.Z.post("/auth/sign_in",o,{withCredentials:!0}).then((a=>{if(201!==a.data.status)throw new Error("ログインエラーが発生しました");t("access-token",a.headers["access-token"]),t("client",a.headers["client"]),t("uid",a.headers["uid"]),e.push({name:"MenuPage"})})).catch((e=>{console.error(e),alert("ログインエラーが発生しました")}))}catch(s){s.inner.forEach((e=>{o.value[e.path]=e.message}))}};function t(e,a){const o=7,r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3);const s="expires="+r.toUTCString(),l=encodeURIComponent(a);document.cookie=`${e}=${l};${s};path=/;secure;SameSite=strict`}return{form:a,errors:o,onSubmit:n,goToWelcomePage:l,validateField:s}}},y=o(83744);const T=(0,y.Z)(k,[["render",v]]);var W=T}}]);
//# sourceMappingURL=3986.c0c6e530.js.map