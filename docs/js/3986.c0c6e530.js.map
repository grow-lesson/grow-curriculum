{"version":3,"file":"js/3986.c0c6e530.js","mappings":"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","sources":["webpack://grow-curriculum/./src/components/LoginPage.vue","webpack://grow-curriculum/./src/components/LoginPage.vue?8d24"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-header\">\n      <a @click=\"goToWelcomePage\" class=\"logo\">GROW Learning Website</a>\n    </div>\n    <div class=\"login-container\">\n      <div class=\"login-title\">\n        <div>Login</div>\n      </div>\n      <br>\n      <div class=\"login\">\n        <form @submit.prevent=\"onSubmit\">\n          <input type=\"text\" v-model=\"form.email\" @input=\"validateField('email')\" placeholder=\"メールアドレス\" name=\"email\" />\n          <p class=\"login-errorMessage\">{{ errors.email }}</p>\n          <input type=\"password\" v-model=\"form.password\" @input=\"validateField('password')\" placeholder=\"パスワード\" name=\"password\" />\n          <p class=\"login-errorMessage\">{{ errors.password }}</p>\n          <button>ログイン</button>\n        </form>\n        <p class=\"btn-back\"><a @click=\"goToWelcomePage\">＞戻る</a></p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport * as yup from 'yup';\nimport api from '@/axios';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    \n    const form = ref({\n      email: '',\n      password: '',\n    });\n\n    const errors = ref({\n      email: '',\n      password: '',\n    });\n\n    const schema = yup.object({\n      email: yup.string().required('メールアドレスは必須の項目です。').email('メールアドレスの形式ではありません。'),\n      password: yup.string().required('パスワードは必須の項目です。'),\n    });\n\n    const validateField = async (field) => {\n      try {\n        await yup.reach(schema, field).validate(form.value[field]);\n        errors.value[field] = '';\n      } catch (e) {\n        errors.value[field] = e.message;\n      }\n    };\n\n    const goToWelcomePage = () => {\n      router.push({ name: \"Welcome\" });\n    };\n\n    const onSubmit = async () => {\n      try {\n        await schema.validate(form.value, { abortEarly: false });\n        const loginData = {\n          email: form.value.email,\n          password: form.value.password,\n        };\n\n        api.post('/auth/sign_in', loginData, { withCredentials: true })\n          .then(response => {\n            if (response.data.status === 201) {\n              setCookie('access-token', response.headers['access-token']);\n              setCookie('client', response.headers['client']);\n              setCookie('uid', response.headers['uid']);\n\n              router.push({ name: 'MenuPage' });\n            } else {\n              throw new Error('ログインエラーが発生しました');\n            }\n          })\n          .catch(error => {\n            console.error(error);\n            alert('ログインエラーが発生しました');\n          });\n      } catch (err) {\n        err.inner.forEach(e => {\n          errors.value[e.path] = e.message;\n        });\n      }\n    };\n\n    function setCookie(name, value) {\n      const days = 7;\n      const date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      const expires = \"expires=\" + date.toUTCString();\n      const cookieValue = encodeURIComponent(value);\n      document.cookie = `${name}=${cookieValue};${expires};path=/;secure;SameSite=strict`;\n    }\n\n    return {\n      form,\n      errors,\n      onSubmit,\n      goToWelcomePage,\n      validateField,\n    };\n  },\n};\n</script>\n\n<style>\n.login-page {\n  width: 100%;\n  background-color: #228bc8;\n  font-size: 12px;\n  height: 100vh;\n  padding-bottom: 40px;\n}\n\n.login-header {\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.9);\n  display: flex;\n  align-items: center;\n  padding: 30px 30px 20px 30px;\n  margin-bottom: 50px;\n}\n\n.logo {\n  font-size: 24px;\n  font-weight: bold;\n  text-decoration: none;\n  color: #333;\n  padding-left: 20px;\n  cursor: pointer;\n}\n\n.login-container {\n  margin: 0 auto;\n  width: 400px;\n  padding: 40px;\n  background-color: #fff;\n  box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.2), 0 10px 5px 0 rgba(0, 0, 0, 0.24);\n  border-radius: 10px;\n  font-size: 16px;\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  color: #228bc8;\n}\n\n.login {\n  text-align: center;\n}\n\n.login input[type=text],\n.login input[type=password] {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 20px;\n  background-color: rgb(0 0 0 / 30%);\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n}\n\n.login-errorMessage {\n  color: red;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.login button {\n  width: 100%;\n  padding: 10px;\n  margin-top: 30px;\n  background-color: #228bc8;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.login button:hover {\n  opacity: 0.8;\n}\n\n.login button:active {\n  opacity: 0.6;\n}\n\n.login input[type=text]:focus,\n.login input[type=password]:focus,\n.login button:focus {\n  outline: none;\n}\n\n::-webkit-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n::-moz-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.btn-back {\n  margin-top: 20px;\n  text-align: right;\n  font-weight: bold;\n  color: #228bc8;\n  cursor: pointer;\n}\n\n@media (max-width: 648px) {\n  .login-container {\n    width: 300px;\n    padding: 20px 20px 100px 20px;\n  }\n}\n</style>\n","import { render } from \"./LoginPage.vue?vue&type=template&id=4421deca\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=4421deca&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_cache","args","$setup","goToWelcomePage","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_withModifiers","type","form","email","$event","onInput","validateField","placeholder","name","_hoisted_7","_toDisplayString","errors","password","_hoisted_8","_hoisted_9","_hoisted_10","setup","router","useRouter","ref","schema","yup","required","async","field","validate","value","e","message","push","abortEarly","loginData","api","post","withCredentials","then","response","data","status","Error","setCookie","headers","catch","error","console","alert","err","inner","forEach","path","days","date","Date","setTime","getTime","expires","toUTCString","cookieValue","encodeURIComponent","document","cookie","__exports__","render"],"sourceRoot":""}