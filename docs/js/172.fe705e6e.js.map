{"version":3,"file":"js/172.fe705e6e.js","mappings":"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","sources":["webpack://grow-curriculum/./src/components/LoginPage.vue","webpack://grow-curriculum/./src/components/LoginPage.vue?8d24"],"sourcesContent":["<template>\n  <div class=\"loginPage\">\n    <div class=\"login-header\">\n      <a @click=\"goToWelcomePage\" class=\"logo\">GROW Learning Website</a>\n    </div>\n    <div class=\"login-container\">\n      <div class=\"login-title\">\n        <div>Login</div>\n      </div>\n      <br>\n      <div class=\"login\">\n        <form @submit=\"onSubmit\">\n          <input type=\"text\" v-model=\"email\" placeholder=\"メールアドレス\" name=\"email\" />\n          <p class=\"login-errorMessage\">{{ errors['form.email'] }}</p>\n          <input type=\"password\" v-model=\"password\" placeholder=\"パスワード\" name=\"password\" />\n          <p class=\"login-errorMessage\">{{ errors['form.password'] }}</p>\n          <button>ログイン</button>\n        </form>\n        <p class=\"btn-back\"><a @click=\"goToWelcomePage\">＞戻る</a></p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineRule, useField, useForm } from 'vee-validate';\nimport AllRules from '@vee-validate/rules';\nimport { object, string, setLocale } from 'yup';\nimport api from '@/axios';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    setLocale({\n      mixed: {\n        defalut: '不正な値です。',\n        required:  ({ label }) => `${label}は必須の項目です。`,\n      },\n      string: {\n        email: ({ label }) => `${label}の形式ではありません。`,\n      },\n    });\n\n    Object.keys(AllRules).forEach((rule) => {\n      defineRule(rule, AllRules[rule]);\n    });\n\n\n    const schema = object({\n      form: object({\n        email: string().required().email().label('メールアドレス'),\n        password: string().required().label('パスワード'),\n      }),\n    });\n\n    const { errors, handleSubmit } = useForm({\n      validationSchema: schema,\n      initialValues: {\n        form: {\n          email: '',\n          password: '',\n        },\n      },\n    });\n\n    const { value: email, } = useField('form.email');\n    const { value: password, } = useField('form.password');\n\n    const router = useRouter();\n\n    const goToWelcomePage = () => {\n      router.push({ name: \"Welcome\" });\n    };\n\n    const onSubmit = handleSubmit(async (values) => {\n      const loginData = {\n        email: values.form.email,\n        password: values.form.password\n      }\n\n      api.post('/auth/sign_in', loginData, { withCredentials: true })\n        .then(response => {\n          if (response.data.status === 201) {\n            setCookie('access-token', response.headers['access-token']);\n            setCookie('client', response.headers['client']);\n            setCookie('uid', response.headers['uid']);\n\n            router.push({ name: 'MenuPage' });\n          } else {\n            throw new Error('ログインエラーが発生しました');\n          }\n        })\n        .catch(error => {\n          console.error(error);\n          alert('ログインエラーが発生しました');\n        }\n      );\n\n\n      function setCookie(name, value) {\n        const days = 7;\n        const date = new Date();\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n        const expires = \"expires=\" + date.toUTCString();\n        const cookieValue = encodeURIComponent(value);\n        document.cookie = `${name}=${cookieValue};${expires};path=/;secure;SameSite=strict`;\n      }\n    });\n\n    return {\n      email,\n      password,\n      errors,\n      onSubmit,\n      goToWelcomePage,\n    };\n  }\n}\n</script>\n<style>\n\n.login-header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.9);\n  display: flex;\n  align-items: center;\n  padding: 20px;\n}\n\n.logo {\n  font-size: 24px;\n  font-weight: bold;\n  text-decoration: none;\n  color: #333;\n  padding-left: 20px;\n  cursor: pointer;\n}\n\n.loginPage {\n  width: 100%;\n  height: 100vh;\n  padding: 150px 0;\n  background-color: #228bc8;\n  font-size: 12px;\n}\n\n.login-container {\n  margin: 0 auto;\n  width: 400px;\n  padding: 40px;\n  background-color: #fff;\n  box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.2), 0 10px 5px 0 rgba(0, 0, 0, 0.24);\n  border-radius: 10px;\n  font-size: 16px;\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  color: #228bc8;\n}\n\n.login {\n  text-align: center;\n}\n\n.login input[type=text],\n.login input[type=password] {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 20px;\n  background-color: rgb(0 0 0 / 30%);\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n}\n\n.login-errorMessage {\n  color: red;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.login button {\n  width: 100%;\n  padding: 10px;\n  margin-top: 30px;\n  background-color: #228bc8;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.login button:hover {\n  opacity: 0.8;\n}\n\n.login button:active {\n  opacity: 0.6;\n}\n\n.login input[type=text]:focus,\n.login input[type=password]:focus,\n.login button:focus {\n  outline: none;\n}\n\n::-webkit-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n::-moz-input-placeholder {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.btn-back {\n  margin-top: 20px;\n  text-align: right;\n  font-weight: bold;\n  color: #228bc8;\n  cursor: pointer;\n}\n\n.btn-back[disabled=\"false\"] {\n  color: gray;\n}\n\n@media (max-width: 648px) {\n  .login-container{\n    width: 300px;\n    padding: 20px 20px 100px 20px;\n  }\n\n}\n</style>\n","import { render } from \"./LoginPage.vue?vue&type=template&id=e2d8386e\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=e2d8386e&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_cache","args","$setup","goToWelcomePage","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","type","email","$event","placeholder","name","_hoisted_7","_toDisplayString","errors","password","_hoisted_8","_hoisted_9","_hoisted_10","setup","setLocale","mixed","defalut","required","label","string","Object","keys","AllRules","forEach","rule","defineRule","schema","object","form","handleSubmit","useForm","validationSchema","initialValues","value","useField","router","useRouter","push","async","loginData","values","setCookie","days","date","Date","setTime","getTime","expires","toUTCString","cookieValue","encodeURIComponent","document","cookie","api","post","withCredentials","then","response","data","status","Error","headers","catch","error","console","alert","__exports__","render"],"sourceRoot":""}