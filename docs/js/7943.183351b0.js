"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[7943],{17943:function(e,a,s){s.r(a),s.d(a,{default:function(){return Z}});var n=s(66252),i=s(49963),o=s(3577);const r={class:"login-page"},t=(0,n._)("div",{class:"login-header"},[(0,n._)("p",{class:"login-title"},"GROW Learning Website")],-1),l={class:"login-container"},c=(0,n._)("div",{class:"login-text"},[(0,n._)("div",null,"Login")],-1),u=(0,n._)("br",null,null,-1),d={class:"login"},p={class:"login-errorMessage"},m={class:"login-errorMessage"},g=["disabled"],w={class:"btn-back"};function v(e,a,s,v,_,h){const b=(0,n.up)("Spinner");return(0,n.wg)(),(0,n.iD)("div",r,[t,(0,n._)("div",l,[c,u,(0,n._)("div",d,[(0,n._)("form",{onSubmit:a[4]||(a[4]=(0,i.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>v.form.email=e),onInput:a[1]||(a[1]=e=>v.validateField("email")),placeholder:"メールアドレス",name:"email"},null,544),[[i.nr,v.form.email]]),(0,n._)("p",p,(0,o.zw)(v.errors.email),1),(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>v.form.password=e),onInput:a[3]||(a[3]=e=>v.validateField("password")),placeholder:"パスワード",name:"password"},null,544),[[i.nr,v.form.password]]),(0,n._)("p",m,(0,o.zw)(v.errors.password),1),(0,n._)("button",{type:"submit",disabled:v.isLoading},(0,o.zw)(v.isLoading?"ログイン中...":"ログイン"),9,g)],32),(0,n._)("p",w,[(0,n._)("a",{onClick:a[5]||(a[5]=(...e)=>v.goToWelcomePage&&v.goToWelcomePage(...e))},"＞戻る")])])]),(0,n.Wm)(b,{isLoading:v.isLoading},null,8,["isLoading"])])}s(57658);var _=s(2262),h=s(16310),b=s(56565),f=s(22201),k=s(58661),y=s(29895),L=s(66801),S={components:{Spinner:L.Z},setup(){const e=(0,f.tv)(),a=(0,_.iH)({email:"",password:""}),s=(0,_.iH)({email:"",password:""}),n=(0,_.iH)(!1),i=h.Ry({email:h.Z_().required("メールアドレスは必須の項目です。").email("メールアドレスの形式ではありません。"),password:h.Z_().required("パスワードは必須の項目です。")}),o=async e=>{try{await h.ct(i,e).validate(a.value[e]),s.value[e]=""}catch(n){s.value[e]=n.message}},r=()=>{e.push({name:"Welcome"})},t=async()=>{n.value=!0;try{await i.validate(a.value,{abortEarly:!1});const s={email:a.value.email,password:a.value.password},n=await b.Z.post("/auth/sign_in",s,{withCredentials:!0});if(201!==n.status&&200!==n.status)throw new Error("ログインエラーが発生しました");await l("access-token",n.headers["access-token"]),await l("client",n.headers["client"]),await l("uid",n.headers["uid"]),e.push({name:"MenuPage"})}catch(s){s.response?alert(s.response.data.message||"ログインエラーが発生しました"):s.request?alert("サーバーから応答がありません。ネットワークを確認してください。"):alert(s.message)}},l=async(e,a,s=7)=>{const n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3);const i=n.toUTCString();(0,k.W)()?await y.Zw.setCookie({url:"https://grow-curriculum-backend-f10ce9239245.herokuapp.com",key:e,value:a,expires:i,path:"/",secure:!0,sameSite:"None"}):document.cookie=e+"="+encodeURIComponent(a)+"; expires="+i+"; path=/; SameSite=None; Secure"};return{form:a,errors:s,isLoading:n,onSubmit:t,goToWelcomePage:r,validateField:o}}},C=s(83744);const W=(0,C.Z)(S,[["render",v]]);var Z=W},66801:function(e,a,s){s.d(a,{Z:function(){return p}});var n=s(66252);const i=e=>((0,n.dD)("data-v-66e9c951"),e=e(),(0,n.Cn)(),e),o={key:0,class:"spinner-container"},r=i((()=>(0,n._)("h1",{class:"spinner-text"},"Loading...",-1))),t={class:"spectrum-bars"};function l(e,a,s,i,l,c){return s.isLoading?((0,n.wg)(),(0,n.iD)("div",o,[r,(0,n._)("div",t,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(5,(e=>(0,n._)("div",{class:"bar",key:e}))),64))])])):(0,n.kq)("",!0)}var c={props:{isLoading:{type:Boolean,default:!1}}},u=s(83744);const d=(0,u.Z)(c,[["render",l],["__scopeId","data-v-66e9c951"]]);var p=d}}]);
//# sourceMappingURL=7943.183351b0.js.map