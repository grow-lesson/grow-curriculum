"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[698],{6698:function(e,r,a){a.r(r),a.d(r,{default:function(){return U}});var s=a(6252),o=a(9963),n=a(3577);const l={class:"loginPage"},t=(0,s._)("div",{class:"welcome-header"},[(0,s._)("a",{href:"/",class:"logo"},"GROW Learning Website")],-1),i={class:"login-container"},c=(0,s._)("div",{class:"login-header"},[(0,s._)("div",null,"Login")],-1),u=(0,s._)("br",null,null,-1),d={class:"login"},m={class:"login-errorMessage"},p={class:"login-errorMessage"},w=(0,s._)("button",null,"ログイン",-1),g=(0,s._)("p",{class:"btn-back"},[(0,s._)("a",{href:"/"},"＞戻る")],-1);function h(e,r,a,h,f,b){return(0,s.wg)(),(0,s.iD)("div",l,[t,(0,s._)("div",i,[c,u,(0,s._)("div",d,[(0,s._)("form",{onSubmit:r[2]||(r[2]=(...e)=>h.onSubmit&&h.onSubmit(...e))},[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>h.email=e),placeholder:"メールアドレス",name:"email"},null,512),[[o.nr,h.email]]),(0,s._)("p",m,(0,n.zw)(h.errors["form.email"]),1),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=e=>h.password=e),placeholder:"パスワード",name:"password"},null,512),[[o.nr,h.password]]),(0,s._)("p",p,(0,n.zw)(h.errors["form.password"]),1),w],32),g])])])}a(7658);var f=a(2954),b=a(2387),_=a(6310),v=a(6565),k=a(2201),S={setup(){(0,_.setLocale)({mixed:{defalut:"不正な値です。",required:({label:e})=>`${e}は必須の項目です。`},string:{email:({label:e})=>`${e}の形式ではありません。`}}),Object.keys(b.ZP).forEach((e=>{(0,f.aH)(e,b.ZP[e])}));const e=(0,_.object)({form:(0,_.object)({email:(0,_.string)().required().email().label("メールアドレス"),password:(0,_.string)().required().label("パスワード")})}),{errors:r,handleSubmit:a}=(0,f.cI)({validationSchema:e,initialValues:{form:{email:"",password:""}}}),{value:s}=(0,f.U$)("form.email"),{value:o}=(0,f.U$)("form.password"),n=(0,k.tv)(),l=a((async e=>{const r={email:e.form.email,password:e.form.password};function a(e,r){const a=7,s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);const o="expires="+s.toUTCString(),n=encodeURIComponent(r);document.cookie=`${e}=${n};${o};path=/;secure;SameSite=strict`}v.Z.post("/auth/sign_in",r,{withCredentials:!0}).then((e=>{if(201!==e.data.status)throw new Error("ログインエラーが発生しました");a("access-token",e.headers["access-token"]),a("client",e.headers["client"]),a("uid",e.headers["uid"]),n.push({name:"MenuPage"})})).catch((e=>{console.error(e),alert("ログインエラーが発生しました")}))}));return{email:s,password:o,errors:r,onSubmit:l}}},$=a(3744);const y=(0,$.Z)(S,[["render",h]]);var U=y}}]);
//# sourceMappingURL=698.1266dfdf.js.map