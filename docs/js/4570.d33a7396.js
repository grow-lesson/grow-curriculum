"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[4570],{24570:function(e,a,o){o.r(a),o.d(a,{default:function(){return T}});var s=o(66252),r=o(49963),l=o(3577);const n={class:"loginPage"},i={class:"login-header"},t={class:"login-container"},c=(0,s._)("div",{class:"login-title"},[(0,s._)("div",null,"Login")],-1),u=(0,s._)("br",null,null,-1),m={class:"login"},d={class:"login-errorMessage"},p={class:"login-errorMessage"},g=(0,s._)("button",null,"ログイン",-1),w={class:"btn-back"};function _(e,a,o,_,h,f){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",i,[(0,s._)("a",{onClick:a[0]||(a[0]=(...e)=>_.goToWelcomePage&&_.goToWelcomePage(...e)),class:"logo"},"GROW Learning Website")]),(0,s._)("div",t,[c,u,(0,s._)("div",m,[(0,s._)("form",{onSubmit:a[3]||(a[3]=(...e)=>_.onSubmit&&_.onSubmit(...e))},[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>_.email=e),placeholder:"メールアドレス",name:"email"},null,512),[[r.nr,_.email]]),(0,s._)("p",d,(0,l.zw)(_.errors["form.email"]),1),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":a[2]||(a[2]=e=>_.password=e),placeholder:"パスワード",name:"password"},null,512),[[r.nr,_.password]]),(0,s._)("p",p,(0,l.zw)(_.errors["form.password"]),1),g],32),(0,s._)("p",w,[(0,s._)("a",{onClick:a[4]||(a[4]=(...e)=>_.goToWelcomePage&&_.goToWelcomePage(...e))},"＞戻る")])])])])}o(57658);var h=o(12954),f=o(32387),b=o(16310),v=o(56565),k=o(22201),P={setup(){(0,b.i_)({mixed:{defalut:"不正な値です。",required:({label:e})=>`${e}は必須の項目です。`},string:{email:({label:e})=>`${e}の形式ではありません。`}}),Object.keys(f.ZP).forEach((e=>{(0,h.aH)(e,f.ZP[e])}));const e=(0,b.Ry)({form:(0,b.Ry)({email:(0,b.Z_)().required().email().label("メールアドレス"),password:(0,b.Z_)().required().label("パスワード")})}),{errors:a,handleSubmit:o}=(0,h.cI)({validationSchema:e,initialValues:{form:{email:"",password:""}}}),{value:s}=(0,h.U$)("form.email"),{value:r}=(0,h.U$)("form.password"),l=(0,k.tv)(),n=()=>{l.push({name:"Welcome"})},i=o((async e=>{const a={email:e.form.email,password:e.form.password};function o(e,a){const o=7,s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3);const r="expires="+s.toUTCString(),l=encodeURIComponent(a);document.cookie=`${e}=${l};${r};path=/;secure;SameSite=strict`}v.Z.post("/auth/sign_in",a,{withCredentials:!0}).then((e=>{if(201!==e.data.status)throw new Error("ログインエラーが発生しました");o("access-token",e.headers["access-token"]),o("client",e.headers["client"]),o("uid",e.headers["uid"]),l.push({name:"MenuPage"})})).catch((e=>{console.error(e);let a="ログインエラーが発生しました";a=e.response?e.response.data.message||a:e.request?"サーバーから応答がありません。ネットワークを確認してください。":e.message,alert(a)}))}));return{email:s,password:r,errors:a,onSubmit:i,goToWelcomePage:n}}},S=o(83744);const y=(0,S.Z)(P,[["render",_]]);var T=y}}]);
//# sourceMappingURL=4570.d33a7396.js.map