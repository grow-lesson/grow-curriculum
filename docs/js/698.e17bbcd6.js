"use strict";(self["webpackChunkgrow_curriculum"]=self["webpackChunkgrow_curriculum"]||[]).push([[698],{6698:function(e,r,a){a.r(r),a.d(r,{default:function(){return U}});var s=a(6252),o=a(9963),l=a(3577);const n={class:"loginPage"},i=(0,s._)("div",{class:"welcome-header"},[(0,s._)("a",{href:"/",class:"logo"},"GROW Learning Website")],-1),t={class:"login-container"},c=(0,s._)("div",{class:"login-header"},[(0,s._)("div",null,"Login")],-1),u=(0,s._)("br",null,null,-1),d={class:"login"},m={class:"login-errorMessage"},p={class:"login-errorMessage"},w=(0,s._)("button",null,"ログイン",-1),h=(0,s._)("p",{class:"btn-back"},[(0,s._)("a",{href:"/"},"＞戻る")],-1);function f(e,r,a,f,_,g){return(0,s.wg)(),(0,s.iD)("div",n,[i,(0,s._)("div",t,[c,u,(0,s._)("div",d,[(0,s._)("form",{onSubmit:r[2]||(r[2]=(...e)=>f.onSubmit&&f.onSubmit(...e))},[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>f.email=e),placeholder:"メールアドレス",name:"email"},null,512),[[o.nr,f.email]]),(0,s._)("p",m,(0,l.zw)(f.errors["form.email"]),1),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=e=>f.password=e),placeholder:"パスワード",name:"password"},null,512),[[o.nr,f.password]]),(0,s._)("p",p,(0,l.zw)(f.errors["form.password"]),1),w],32),h])])])}a(7658);var _=a(2954),g=a(2387),b=a(6310),v=a(6565),k=a(2201),S={setup(){(0,b.i_)({mixed:{defalut:"不正な値です。",required:({label:e})=>`${e}は必須の項目です。`},string:{email:({label:e})=>`${e}の形式ではありません。`}}),Object.keys(g.ZP).forEach((e=>{(0,_.aH)(e,g.ZP[e])}));const e=(0,b.Ry)({form:(0,b.Ry)({email:(0,b.Z_)().required().email().label("メールアドレス"),password:(0,b.Z_)().required().label("パスワード")})}),{errors:r,handleSubmit:a}=(0,_.cI)({validationSchema:e,initialValues:{form:{email:"",password:""}}}),{value:s}=(0,_.U$)("form.email"),{value:o}=(0,_.U$)("form.password"),l=(0,k.tv)(),n=a((async e=>{const r={email:e.form.email,password:e.form.password};function a(e,r){const a=7,s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);const o="expires="+s.toUTCString(),l=encodeURIComponent(r);document.cookie=`${e}=${l};${o};path=/;secure;SameSite=strict`}v.Z.post("/auth/sign_in",r,{withCredentials:!0}).then((e=>{if(201!==e.data.status)throw new Error("ログインエラーが発生しました");a("access-token",e.headers["access-token"]),a("client",e.headers["client"]),a("uid",e.headers["uid"]),l.push({name:"MenuPage"})})).catch((e=>{console.error(e),alert("ログインエラーが発生しました")}))}));return{email:s,password:o,errors:r,onSubmit:n}}},y=a(3744);const $=(0,y.Z)(S,[["render",f]]);var U=$}}]);
//# sourceMappingURL=698.e17bbcd6.js.map